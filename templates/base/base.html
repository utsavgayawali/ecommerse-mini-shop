<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Nepshop Home</title>
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
    <script src="/static/js/jquery-2.0-0.min.js" type="text/javascript"></script>
    <script src="/static/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/static/fonts/fontawesome/css/all.min.css" type="text/css" rel="stylesheet" />
    <link href="/static/css/ui.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/responsive.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
    <script type="text/javascript">
      $(document).ready(function () {
        // jQuery code
      });
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      *:focus {
        outline: none !important;
      }

      header {
        width: 100%;
      }

      .top-bar {
        background-color: #1E40AF;
        color: white;
        font-size: 14px;
        padding: 8px 20px;
        display: flex;
        justify-content: flex-end;
        gap: 20px;
        flex-wrap: wrap;
      }

      .top-bar a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        padding: 5px 0;
        transition: color 0.3s ease;
        flex-shrink: 0;
      }

      .top-bar a:hover {
        color: #FFD700;
      }

      .main-nav {
        background-color: #1E40AF;
        padding: 18px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        position: relative;
        margin-bottom: 20px;
      }

      .logo {
        font-size: 32px;
        font-weight: 600;
        color: white;
        flex-shrink: 0;
        margin-right: 20px;
        margin-bottom: 0;
        line-height: 1;
      }

      .search-and-cart-wrapper {
        display: flex;
        align-items: center;
        flex-grow: 1;
        justify-content: center;
        max-width: 700px;
        margin: 0 20px;
        margin-top: 0;
        margin-bottom: 0;
      }

      .search-bar {
        display: flex;
        flex-grow: 1;
        max-width: 600px;
      }

      .search-input {
        flex: 1;
        padding: 10px;
        border: none;
        border-radius: 4px 0 0 4px;
        font-size: 14px;
        height: 40px;
      }

      .search-btn {
        padding: 10px 16px;
        background-color: white;
        border: none;
        color: #f85606;
        border-radius: 0 4px 4px 0;
        cursor: pointer;
        height: 40px;
      }

      .cart-icon-container {
        margin-left: 15px;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        height: 40px;
      }

      .cart-icon-container a {
        color: white;
        text-decoration: none;
        position: relative;
        display: block;
        padding: 5px;
      }

      .cart-badge {
        position: absolute;
        top: -6px;
        right: -10px;
        background-color: white;
        color: #f85606;
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 50%;
        font-weight: bold;
      }

      .profile-icon-container {
        display: flex;
        align-items: center;
        margin-left: 20px;
        flex-shrink: 0;
        height: 40px;
      }

      .profile-icon-container a {
        color: white;
        text-decoration: none;
        position: relative;
      }

      .profile-img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
      }

      .category-nav {
        background-color: #000080;
        padding: 10px 20px;
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
      }

      .category-nav a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        padding: 5px 0;
        transition: color 0.3s ease;
      }

      .category-nav a:hover {
        color: #FFD700;
      }

      /* Responsive adjustments */
      @media (max-width: 992px) {
        .main-nav {
          padding: 15px 15px;
          margin-bottom: 15px;
        }
        .logo {
          font-size: 28px;
          margin-right: 15px;
        }
        .search-and-cart-wrapper {
          margin: 0 15px;
          max-width: 550px;
        }
        .search-bar {
            max-width: 450px;
        }
        .profile-icon-container {
          margin-left: 15px;
        }
        .search-input, .search-btn, .cart-icon-container, .profile-icon-container {
            height: 38px;
        }
      }

      @media (max-width: 768px) {
        .top-bar {
          justify-content: flex-start;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          gap: 20px;
          padding: 10px 10px;
          white-space: nowrap;
          scrollbar-width: none;
          -ms-overflow-style: none;
        }
        .top-bar::-webkit-scrollbar {
          display: none;
        }
        .top-bar a {
          flex-shrink: 0;
        }

        .main-nav {
          flex-direction: column; /* Stack items vertically */
          align-items: flex-start; /* Align logo to the left of the main-nav */
          padding: 15px 10px; /* Adjusted padding */
          margin-bottom: 15px;
          position: relative; /* Crucial for absolute positioning of profile icon */
        }

        .logo {
          order: 1; /* Ensures logo appears first in the column */
          width: 100%; /* Take full width to establish its line */
          text-align: left; /* Align logo text to the left */
          margin-bottom: 10px; /* Space below the logo */
          font-size: 36px;
          margin-right: 0; /* Reset any desktop-specific right margin */
        }

        .profile-icon-container {
          /* Position absolutely to the top-right corner of the main-nav */
          position: absolute;
          top: 15px; /* Aligns vertically with the logo (adjust as needed) */
          right: 10px; /* Positions it from the right edge */
          order: unset; /* Remove flex order as it's absolutely positioned */
          display: block; /* Ensure it's not a flex item in this context */
          margin: 0; /* Remove any lingering margins */
          width: auto; /* Let content determine width */
          height: auto; /* Let content determine height */
          z-index: 10; /* Ensure it appears above other elements if there's overlap */
        }

        .search-and-cart-wrapper {
          order: 2; /* Search bar and cart appear second in the column */
          width: 100%; /* Take full width */
          margin: 10px 0; /* Vertical margin for spacing */
          justify-content: center; /* Center the search bar and cart horizontally */
          max-width: none;
          padding: 0;
        }

        .search-bar {
          flex-grow: 1;
          max-width: 90%; /* Limit search bar width on small screens */
        }

        .cart-icon-container {
          margin-left: 15px; /* Space between search bar and cart */
        }

        .profile-img {
          width: 32px; /* Ensure consistent size for the profile image */
          height: 32px;
        }

        .category-nav {
          display: flex;
          justify-content: flex-start;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          gap: 20px;
          padding: 10px 10px;
          white-space: nowrap;
          scrollbar-width: none;
          -ms-overflow-style: none;
        }
        .category-nav::-webkit-scrollbar {
          display: none;
        }
        .category-nav a {
          flex-shrink: 0;
        }
      }

      @media (max-width: 480px) {
          .logo {
              font-size: 30px;
          }
          .search-input, .search-btn {
              padding: 8px;
              height: 36px;
          }
          .cart-icon-container {
              margin-left: 10px;
              height: 36px;
          }
          .profile-icon-container {
            /* Adjust absolute positioning for smaller screens if needed */
            top: 12px; /* Slightly adjust for smaller overall padding */
            right: 8px;
          }
      }
    </style>
  </head>
  <body>
    <div class="top-bar">
      <a href="{% url 'home' %}">Home</a>
      {% if request.user.is_authenticated %}
        <a href="{% url 'shipping_address' %}">Shipping</a>
        <a href="{% url 'logout_view' %}">Log out</a>
      {% else %}
        <a href="{% url 'login_view' %}">Login</a>
        <a href="{% url 'register_view' %}">Sign up</a>
      {% endif %}
    </div>

    <div class="main-nav">
      <div class="logo">Nepshop</div>

      <div class="search-and-cart-wrapper">
        <form method="get" action="{% url 'search_view' %}" class="search-bar">
          <input type="search" name="q" class="search-input" placeholder="Search in Nepshop" value="{{request.GET.q}}">
          <button type="submit" class="search-btn">üîç</button>
        </form>

        <div class="cart-icon-container">
          <a href="{% url 'cart' %}" title="Cart">
            <i class="fas fa-shopping-cart fa-lg"></i>
            <span class="cart-badge">{{ request.user.profile.get_cart_count }}</span>
          </a>
        </div>
      </div>

      <div class="profile-icon-container">
        {% if request.user.is_authenticated %}
          <a href="{% url 'profile' %}" title="Profile">
            {% if request.user.profile.profile_image %}
              <img class="profile-img" src="{{ request.user.profile.profile_image.url }}" alt="Profile">
            {% else %}
              <i class="fas fa-user-circle fa-lg"></i>
            {% endif %}
          </a>
        {% endif %}
      </div>
    </div>

     {% comment %} <nav class="category-nav">
    
      <a href="{% url 'product_category' 'pants' %}">Pants</a>
      <a href="{% url 'product_category' 't-shirt' %}">T-Shirt</a>
      <a href="{% url 'product_category' 'hoodies' %}">Hoodies</a>
      <a href="{% url 'product_category' 'shoes' %}">Shoes</a>
      <a href="{% url 'product_category' 'jacket' %}">Jackets</a>
      <a href="{% url 'product_category' 'shorts' %}">Shorts</a>
    
    </nav>   {% endcomment %}

    {% block body %}{% endblock body %}
  </body>
</html>